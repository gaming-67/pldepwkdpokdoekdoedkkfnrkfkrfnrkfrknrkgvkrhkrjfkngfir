<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Stick Figure Fighter — Dojo Edition</title>
<style>
  html,body{
    height:100%;margin:0;
    background:linear-gradient(180deg,#071421,#021018);
    color:#e6eef8;font-family:Inter,system-ui;
    overflow:hidden;
  }
  #wrap{position:relative;max-width:1100px;margin:20px auto;}
  canvas{
    display:block;width:100%;height:620px;
    background:#071426;border-radius:8px;
    box-shadow:0 10px 30px rgba(2,6,23,0.6);
  }
  .overlay, #menu, #charSelect, #stageSelect {
    position:absolute;inset:0;
    display:flex;align-items:center;justify-content:center;
    flex-direction:column;
  }
  .panel{background:rgba(255,255,255,0.03);padding:8px 12px;border-radius:10px;}
  button{
    background:#0c1320;border:1px solid rgba(255,255,255,0.2);
    color:white;padding:8px 14px;border-radius:8px;margin:5px;
    cursor:pointer;transition:0.2s;
  }
  button:hover{background:#1b2a40;}
  #menu,#charSelect,#stageSelect{background:rgba(0,0,0,0.6);z-index:10;}
  .hidden{display:none;}
</style>
</head>
<body>
<div id="wrap">
  <canvas id="game" width="1100" height="620"></canvas>
</div>

<!-- Main Menu -->
<div id="menu">
  <h1>Stick Figure Fighter — Dojo Edition</h1>
  <div>
    <button id="btnStart">Quick Start</button>
    <button id="btnChar">Character Select</button>
    <button id="btnStage">Stage Select</button>
  </div>
  <p>Controls: A/D move, W jump, J light, K heavy, L kick, Shift dash, S block, R restart</p>
</div>

<div id="charSelect" class="hidden">
  <h2>Select Fighter</h2>
  <div>
    <button data-char="samurai">Samurai</button>
    <button data-char="monk">Monk</button>
    <button data-char="ronin">Ronin</button>
  </div>
  <button class="back">Back</button>
</div>

<div id="stageSelect" class="hidden">
  <h2>Select Stage</h2>
  <div>
    <button data-stage="Dojo">Dojo</button>
    <button data-stage="Courtyard">Courtyard</button>
    <button data-stage="Rooftop">Rooftop</button>
  </div>
  <button class="back">Back</button>
</div>

<script>
const canvas=document.getElementById('game'), ctx=canvas.getContext('2d');
let W=canvas.width,H=canvas.height;

// Game state
let gameRunning=false, lastTime=performance.now();

// Simple test draw
function drawScene(){
  ctx.fillStyle='#0b1720'; ctx.fillRect(0,0,W,H);
  ctx.fillStyle='#f59e0b'; ctx.fillText("Stick Fighter — Dojo Edition",W/2-130,60);
}
function loop(){
  drawScene();
  if(gameRunning){ /* game logic here */ }
  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

// Menu logic
const menu=document.getElementById('menu');
const charSelect=document.getElementById('charSelect');
const stageSelect=document.getElementById('stageSelect');

function showMenu(){menu.classList.remove('hidden');charSelect.classList.add('hidden');stageSelect.classList.add('hidden');}
function showChar(){menu.classList.add('hidden');charSelect.classList.remove('hidden');}
function showStage(){menu.classList.add('hidden');stageSelect.classList.remove('hidden');}
function startMatch(){
  menu.classList.add('hidden');
  charSelect.classList.add('hidden');
  stageSelect.classList.add('hidden');
  gameRunning=true;
  lastTime=performance.now();
}

// Hook buttons AFTER DOM loaded
document.getElementById('btnStart').onclick=startMatch;
document.getElementById('btnChar').onclick=showChar;
document.getElementById('btnStage').onclick=showStage;
document.querySelectorAll('.back').forEach(b=>b.onclick=showMenu);
document.querySelectorAll('[data-char]').forEach(b=>b.onclick=(e)=>{showMenu();});
document.querySelectorAll('[data-stage]').forEach(b=>b.onclick=(e)=>{showMenu();});

// Fix for browsers blocking clicks before user interaction
window.addEventListener('click',()=>{ if(audioCtx?.state==='suspended') audioCtx.resume(); });
</script>
</body>
</html>
